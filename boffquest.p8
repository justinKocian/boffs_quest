pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- callbacks --

function _init()
	map_setup()
	make_player()
end

--

function _update()
	move_player()
end

--

function _draw()
	cls()
	draw_map()
	draw_player()
end

--
-->8
-- map --

function map_setup()
	-- map tiles
	wall=0
	key=1
	door=2
	anim1=3
	anim2=4
	lose=6
end

--

function draw_map()
	mapx=flr(p.x/16)*16
	mapy=flr(p.y/16)*16
	camera(mapx*8,mapy*8)

	map(0,0,0,0,128,64)
end

--

function is_tile(tile_type,x,y)
	tile=mget(x,y)
	
	has_flag=fget(tile,tile_type)
	return has_flag
end

--

function can_move(x,y)
	return not is_tile(wall,x,y)
end

--


-->8
-- player --

function make_player()
	p={}
	p.x=3
	p.y=2
	p.sprite=1
	p.keys=0
end

--

function draw_player()
	spr(p.sprite,p.x*8,p.y*8)
end

--

function move_player()
	newx=p.x
	newy=p.y
	
	if (btnp(⬅️)) newx-=1
	if (btnp(➡️)) newx+=1
	if (btnp(⬆️)) newy-=1
	if (btnp(⬇️)) newy+=1
	
	if (can_move(newx,newy)) then
		p.x=mid(0,newx,127)
		p.y=mid(0,newy,63)
	else
		sfx(0)
	end
end
__gfx__
00000000888000000000000088700000888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000806666008880000080766600806666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700006111008066660000711100006111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000006616000061110000761600006616000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000054555500066160004445550055545500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700464777700545555000656560004677770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000004666004647777000466600006646000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006006000040060000600600006006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333333333333333333333dddddd333555533335ddd3333333333335dd3330000000000000000000000000000000000000000000000000000000000000000
3333b3333333333333355533dd5ddddd3577775335ddddd3335ddd3335dd5d330000000000000000000000000000000000000000000000000000000000000000
33333b33333333333355d553dddddd5d5777777535d55dd335ddddd335d5dd330000000000000000000000000000000000000000000000000000000000000000
3b333b333333333335555d53dddddddd5777777535ddddd335d55dd3335dd3330000000000000000000000000000000000000000000000000000000000000000
33b333333333333335555553dddddddd5d7777d535d5d5d335ddd5d3335dd3330000000000000000000000000000000000000000000000000000000000000000
33b3333333333333b555555bd5dddd5d5dddddd535ddddd335ddddd335d5dd330000000000000000000000000000000000000000000000000000000000000000
33333333333333333bb555b3dddddddd35dddd5335dd5dd3333333335dddddd30000000000000000000000000000000000000000000000000000000000000000
3333333333333333333333333dddddd335dddd533333333333333333333333330000000000000000000000000000000000000000000000000000000000000000
33333333111111111111111111111111000000003333333333333333000000000000000000000000000000000000000000000000000000000000000000000000
333333331111111111c1111111155511000000009993333333333333000000000000000000000000000000000000000000000000000000000000000000000000
33777733111111111c1c11111155d551000000009a99999933333333000000000000000000000000000000000000000000000000000000000000000000000000
33377333111111111111111115555d5100000000939aa9a933333333000000000000000000000000000000000000000000000000000000000000000000000000
332222331111111111111c11155555510000000099933a3a33333333000000000000000000000000000000000000000000000000000000000000000000000000
33288233111111111111c1c1c555555c00000000aaa3333333333333000000000000000000000000000000000000000000000000000000000000000000000000
3322223311111111111111111cc555c1000000003333333333333333000000000000000000000000000000000000000000000000000000000000000000000000
33333333111111111111111111111111000000003333333333333333000000000000000000000000000000000000000000000000000000000000000000000000
00700000000000000000000066666666000000004a4444a44a4aa4a4000000000000000000000000000000000000000000000000000000000000000000000000
00070000000000000880088066888866000000004a4444a415199151000000000000000000000000000000000000000000000000000000000000000000000000
00007000700000078888888868666686000000004a4444a411111111000000000000000000000000000000000000000000000000000000000000000000000000
00007000070000708888888868688686000000004a4444a411111111000000000000000000000000000000000000000000000000000000000000000000000000
0000700000777700088888806868868600000000aaa99aaa15111151000000000000000000000000000000000000000000000000000000000000000000000000
0000700000000000008888006866668600000000191991914a4444a4000000000000000000000000000000000000000000000000000000000000000000000000
00070000000000000008800066888866000000004a4444a44a4444a4000000000000000000000000000000000000000000000000000000000000000000000000
00700000000000000000000066666666000000004a4444a44a4444a4000000000000000000000000000000000000000000000000000000000000000000000000
33333333333333333333333333333333888888085000000555555555111111111111111111111111333333333333333333333333333333331111111111111111
36333633303330333b333b3330333033a08a80880000000066666566111111111c11c11c11111111333373333333333333333333333333331115551111111111
0603060305030503060306030503050380880a88000000006666656611111c1cc1cc1cc1c1c1111133373733333333ff33fff33fff3333331155655115611111
3033303330333033303330333033303388a08a8800000000555555551111c1c1111111111c1c1111333373333333ff11ff111ff111ff33331555565115561111
333333333333333333333333333333330a8a08880000000066566666111c11111f11f11f1111c11137333333333f1111111111111111f33315555551c255c56c
36333633303330333b333b333033303388888a88000000006656666611c111fff3ff3ff3ff111c1173733333333f111111ccc11c1111f333c255555c1cccc25c
0603060305030503060306030503050380a888080000000055555555111c1f333333333333f1c1113733333333f11111cc111cc111111f331c2255c111111cc1
303330333033303330333033303330338a888888500000056666656611c11f333333333333f11c113333333333f111111111111111111f3311cccc1111111111
666556666665566666655666666556664444444466566656665666561c11f3333333333333f11c113333733333f11c11111111111c11f3331111111111111111
67655676606556066b6556b66065560644454454554444555511115511c11f3333333333333f11c133373733333f11c1111111111c11f33311c1111111111c11
0705507005055050070550700505505045444444544444465211111611c11f333333333333f11c113b3b7333333f11c11111111111c11f331c1c11111111c1c1
505555055055550550555505505555054444444451444445521111151c11f3333333333333f11c1133b3333333f11c111111111111c11f331111111111111111
5555555555555555555555555555555544445444644444466211111611c11f3333333333333f11c133b3333333f11c111111111111c11f331111111111111111
67555576605555066b5555b6605555064544444454444a455211111511c11f333333333333f11c11333b333333f11c11111111111c11f3331111c11111c11111
070550700505505007055070050550504445445451444446521111161c11f3333333333333f11c1133333333333f11c1111111111c11f333111c1c111c1c1111
6065560660655606606556066065560644444444544444455211111511c11f3333333333333f11c133333333333f11c11111111111c11f331111111111111111
5555555555555555555555555555555555555555665666566656665611c11f333333333333f11c114444444433f111111111111111111f333333333333333333
56666666666666656666666656666666566666655555555555555555111c1f333333333333f1c1114141141433f111111cc111cc11111f333311113333111133
5666666666666665666666665666666656666665566226665662266611c111ff3ff3ff3fff111c1144444444333f1111c11ccc111111f3333132b313313bb313
5666666666666665666666665666666656666665552dd25555233255111c1111f11f11f11111c11141414114333f1111111111111111f33331bbb21331bbbb13
5666666666666665666666665666666656666665662dd256662332561111c1c1111111111c1c1111444444443333ff111ff111ff11ff333313b2bbb113bbbbb1
5666666666666665666666665666666656666665555225555552255511111c1c1cc1cc1cc1c11111333443b3333333fff33fff33ff333333132bb2b113bbbbb1
5666666666666665666666665666666656666665566656665666566611111111c11c11c1111111113b344b33333333333333333333333333133bbb31133bbb31
5666666556666665555555555555555556666665555555555555555511111111111111111111111133b44b333333333333333333333333333111111331111113
56666665566666655666666555555555566666656665566666566656333333333333333333333333333333333311113333311333333113333333333333333333
56666666666666655666666566666665566666656665566655555555333333b33333b3333335553333333333313bb3133313b1333313b1333311113333111133
5666666666666665566666656666666556666665665555665666566633333b3333333b33335565533563333331bb8b133139b313313bbb13313cb313313bb313
56666666666666655666666566666665566666655555555555555555333b3b333b333b33355556533556333313bbbbb1313bb313313bbb1331bbbc1331bbbb13
5666666666666665566666656666666556666665555555556656665633b33b3333b33b3335555553b255b563138bb8b1139bbb3113bbbb3113bcbbb113bbbbb1
5666666666666665566666656666666556666665665555665555555533b3333333b33333b255555b3b33b25b3133bb1313bbb93113bbb33113cbbcb113bbbbb1
5666666666666665566666656666666556666665666556665666566633333333333333333b2255b3333333b3331111331111111111111111133bbb31133bbb31
55555555555555555666666555555555555555556665566655555555333333333333333333333333333333333334433333344333333443333111111331111113
__gff__
0000000000000000000000000000000000000100010101010000000000000000000101010002000000000000000000000001000000000000000000000000000000000000000000010101000101010101000000000001000100010001010101010101010101000001010101010101010101010101010001000001010101010101
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1414141414141414141414141414141414141414141414141414141414141414000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
144a4a4a4a4a4a4a774a4a4a4a4a4a1414111111111111111111111111111114000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
144a4a4a4a4a4a58584a58584a4a4a1414111116114a11767676767676761114000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
144a4a4a775858585877155858164a1414111511111111761313131313761114000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
144a4a4a585878581658585858584a1414111111111111761313131313761114000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
144a77585858584a5858585878164a1414114a11111611761313131313761114000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
144a5858585858585858585858587914141111114a1211761313131313761114000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
14584a5858791313131313131313131313131313131312767676761376761114000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
14587858131313585858585878585814141111114a1311111111111311111114000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
14584a5813155858154a58165858581414111111111313111111111311111114000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1416775813584a5858585858584b4c4c4c4c4c4d111113111111131311111114000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
14585879135816584a164a58585b5c5c5c5c5c674c4c4c4c4c4c4c4c4d111114000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
144a5858131358585858584b4c695c5c5c5c5f5c5c225c5c5c5c5c5c5d111114000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
144a154a791358781758585b5c5c225c5f5c4e225c5c5c5f5c5c5c22674c4c4d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
144a4a4a58135858584a4a5b5c5c5c5c5c5c5c5c4e4e4f5c4e5c5c5c4e5c5c5d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
14141414141314141414145b5c5c225c5c5c5c5c5c5c4f5c5c5c5f5c225c5c5d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
14141414141314141414145b5c5c5c5c476c6c6c6c495f5c5c5c4e5c5c5c5c5d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
144a4a4a4a1311114a4a125b5c4e5c5c5d585858586b6c6c6c6c6c6c6c495c5d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
144a174a111311164a4a156b495c5c5c5d5858606262626262626262615b5c5d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
144a11151113111111114a4a5b5c5c5c5d5858721313131313131313725b5c5d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
144a111111131111111116115b4e5c5c5d5858721313131313131313725b5c5d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
141211114a1311111711114a5b4f5c5c674c4d721313131313131313725b5c5d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1411161111131111111111115b5c225c5c5c5d706273136362626262715b5c5d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1411111511131313131115115b4f5c5c5c4e5d767676137676767676765b5c5d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1411111111111112131111115b5c4f5f5c5c674d13131313134b4c4c4c695c5d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1411161116111111131211115b5c5c5c5c5c5c674d13134b4c69225c5c225c5d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1411111111114a11131313116b49225c5c5c4e5c5d13135b5c224e5c5c476c6d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
144a4a4a1111151111121311116b6c6c6c6c6c6c6d13136b6c6c6c6c6c6d7914000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
14124a1711111111111113131313131313131313131311114a1111114a111114000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
144a4a4a4a4a4a4a111111164a4a4a141411111111164a4a4a4a15114a111114000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
144a164a4a164a1111114a4a4a4a4a14144a154a114a4a4a4a4a4a1111111214000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1414141414141414141414141414141414141414141414141414141414141414000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000400000355001550005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500
